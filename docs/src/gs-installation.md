---
title: "CruiseKube Setup Guide - Installation"
description: "Complete installation guide for CruiseKube. Learn how to set up the Kubernetes optimization operator with Helm, configure prerequisites, and start optimizing your workloads."
keywords:
  - CruiseKube installation
  - Kubernetes optimization setup
  - Helm installation guide
  - Kubernetes operator setup
  - workload optimization
  - resource management
---

# Setup

Get started by following below steps:

## Prerequisites

- **Kubernetes Cluster:** You should have a running Kubernetes cluster. You can use any cloud-based or on-premises Kubernetes distribution.
- **kubectl:** Installed and configured to interact with your Kubernetes cluster.
- **Helm:** Installed for managing Kubernetes applications.
- **Prometheus:** You should have a prometheus installed in your cluster.
??? example "Installing Prometheus"
    We will setup a sample prometheus to read metrics from the ingress controller.

    ```bash
    helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
    helm repo update
    helm install kube-prometheus-stack prometheus-community/kube-prometheus-stack \
      --namespace monitoring \
      --create-namespace \
      --set alertmanager.enabled=false \
      --set grafana.enabled=false \
      --set prometheus.prometheusSpec.serviceMonitorSelectorNilUsesHelmValues=false
    ```

## Install

### **1. Install CruiseKube using helm**

Install CruiseKube from the OCI registry:

```bash
helm install ck-demo oci://tfy.jfrog.io/tfy-helm/cruisekube --namespace cruisekube-system --create-namespace
```

> **Note:** You can customize the installation by providing your own `values.yaml` file with specific configurations. See the [configuration documentation](config.md) for available options.

</br>

### **2. Verify Installation**

Check that the CruiseKube components are running:

```bash
kubectl get pods -n cruisekube-system
```

You should see pods like `cruisekube-controller-manager-xxx` and `cruisekube-webhook-server-xxx` in the `Running` state.

</br>

### **3. Enable Tasks**

By default, all tasks are disabled. This is to prevent any unintended optimizations. 
You will need to manually enable each task based on your requirements. To do this, you will need to pass environment variables in the values file to the Helm chart.


1. **Enable Create Stats Task**
    - To enable this task, set the `CRUISEKUBE_CONTROLLER_TASKS_CREATESTATS_ENABLED` environment variable to `true` in your values file.
    - You also need to configure prometheus URL in the env section of the values file. This will be used by the stats creation task to fetch metrics. Set `CRUISEKUBE_DEPENDENCIES_INCLUSTER_PROMETHEUSURL` to the URL of your Prometheus instance.

2. **Enable Apply Recommendation Task**
    - To enable this task, set the `CRUISEKUBE_CONTROLLER_TASKS_APPLYRECOMMENDATION_ENABLED` environment variable to `true` in your values file. Note this is currently in dry-run mode by default. So recommendations will only be generated but not applied.

> Similarly, you can enable other tasks by checking the available environment variables in the [value.yaml file](https://github.com/truefoundry/cruiseKube/blob/2d187dbc5ed8275f747e1597b728e40b0d3f0a9e/charts/cruisekube/values.yaml#L101).

</br>

### **4. View Recommendations**

Once the tasks are enabled, you can view the recommendations generated by Port-Forwarding the frontend service.

```bash
kubectl port-forward -n cruisekube-system svc/cruisekube-frontend 3000:3000
```

Open your browser and navigate to `http://localhost:3000` to view the recommendations.

<img src="../../images/demo_recommendation.png" alt="Recommendations Dashboard" width="1000"/>

Read more about configuration in the [Configuration Dashboard](config-dashboard.md) section.

</br>

### **5. Apply Recommendations**

Once you've reviewed the recommendations in the dashboard, you can disable the dry-run mode to actually apply the recommendations. 

To enable the apply recommendation task, set the `CRUISEKUBE_CONTROLLER_TASKS_APPLYRECOMMENDATION_DRYRUN` environment variable to `false` in your values file.


## Uninstall

To uninstall CruiseKube, run:

```bash
helm uninstall ck-demo -n cruisekube-system
kubectl delete namespace cruisekube-system
```
